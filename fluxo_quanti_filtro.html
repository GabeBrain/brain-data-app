<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fluxo de Projeto Quanti (Vertical com Filtros) - Brain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #5b7537; /* Verde Brain */
            --color-text: #333333;
            --color-background: #f9fafb;
            --color-line: #d1d5db; /* Cinza da linha do tempo */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text);
        }
        .task-card {
            transition: opacity 0.3s ease-in-out, transform 0.2s ease-in-out;
        }
        .task-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .task-card.is-filtered {
            opacity: 0.2;
        }
        .filter-btn {
            transition: all 0.2s ease;
        }
        .filter-btn.active {
            background-color: var(--color-primary) !important;
            color: white !important;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="container mx-auto max-w-screen-2xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold" style="color: var(--color-primary);">Fluxo de Projeto Quanti</h1>
            <p class="text-gray-600 mt-1">Visão por fases com filtro interativo de responsáveis.</p>
        </header>

        <div class="mb-8 p-4 bg-white rounded-lg shadow">
            <h3 class="font-bold text-lg mb-3 text-gray-700">Filtrar por Responsável:</h3>
            <div id="filters-container" class="flex flex-wrap gap-2">
                </div>
        </div>
        
        <div id="board-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            </div>

    </div>

    <script>
        const projectData = {
            phases: [
                { name: "MATERIAL DE PESQUISA", color: "#60a5fa" },
                { name: "CAMPO", color: "#eab308" },
                { name: "RELATÓRIO A&R", color: "#10b981" },
                { name: "APRESENTAÇÃO VERSÃO FINAL", color: "#6366f1" }
            ],
            tasks: [
                { phase: "MATERIAL DE PESQUISA", start: 0, end: 1, name: "Entrada da proposta no sistema", responsible: "Consultor" },
                { phase: "MATERIAL DE PESQUISA", start: 1, end: 2, name: "Envio do checklist para cliente", responsible: "Gestora Quanti" },
                { phase: "MATERIAL DE PESQUISA", start: 1, end: 2, name: "Agenda para reunião de briefing", responsible: "Atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 7, end: 8, name: "Realização da reunião de briefing", responsible: "Atendimento + CLIENTE" },
                { phase: "MATERIAL DE PESQUISA", start: 8, end: 14, name: "Elaboração da ATA da reunião", responsible: "Atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 14, end: 15, name: "Recebimento do checklist", responsible: "CLIENTE" },
                { phase: "MATERIAL DE PESQUISA", start: 15, end: 17, name: "Email interno de abertura do MP", responsible: "Atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 17, end: 18, name: "Elaboração do Material de Pesquisa", responsible: "Analista" },
                { phase: "MATERIAL DE PESQUISA", start: 18, end: 21, name: "Revisão do MP e envio da v1", responsible: "Atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 21, end: 24, name: "Elaboração do orçamento da coleta", responsible: "Gestor Campo" },
                { phase: "MATERIAL DE PESQUISA", start: 24, end: 27, name: "Aprovação do orçamento da coleta", responsible: "Financeiro + CEO" },
                { phase: "MATERIAL DE PESQUISA", start: 27, end: 30, name: "Ajustes do MP e envio da v2", responsible: "Analista + Atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 30, end: 31, name: "Aprovação do MP e envio do cronograma", responsible: "Atendimento" },
                { phase: "CAMPO", start: 31, end: 32, name: "Email interno com MP aprovado", responsible: "Atendimento" },
                { phase: "CAMPO", start: 31, end: 32, name: "Contratação dos pesquisadores", responsible: "Gestor Campo" },
                { phase: "CAMPO", start: 32, end: 34, name: "Sistematização do MP na plataforma", responsible: "Auditor" },
                { phase: "CAMPO", start: 32, end: 34, name: "Elaboração do Plano Amostral", responsible: "Analista" },
                { phase: "CAMPO", start: 34, end: 37, name: "Aprovação do Plano Amostral", responsible: "Analista + CONSULTOR" },
                { phase: "CAMPO", start: 34, end: 37, name: "Teste 1 do MP (GDS)", responsible: "Auditor + Auditor" },
                { phase: "CAMPO", start: 34, end: 37, name: "Teste 2 do MP (Simulação)", responsible: "Auditor + Analista" },
                { phase: "CAMPO", start: 37, end: 40, name: "Treinamento dos pesquisadores", responsible: "Auditor" },
                { phase: "CAMPO", start: 40, end: 56, name: "Coleta de dados", responsible: "Auditor + Pesquisadores" },
                { phase: "CAMPO", start: 44, end: 48, name: "Parcial 1 (25%)", responsible: "Analista" },
                { phase: "CAMPO", start: 48, end: 52, name: "Parcial 2 (50%)", responsible: "Analista" },
                { phase: "CAMPO", start: 52, end: 56, name: "Parcial 3 (75%)", responsible: "Analista" },
                { phase: "CAMPO", start: 56, end: 60, name: "Término do campo", responsible: "Auditor" },
                { phase: "CAMPO", start: 60, end: 61, name: "Base higienizada", responsible: "Auditor" },
                { phase: "RELATÓRIO A&R", start: 61, end: 64, name: "Elaboração do relatório", responsible: "Analista" },
                { phase: "RELATÓRIO A&R", start: 64, end: 65, name: "Revisão do relatório", responsible: "A&R" },
                { phase: "RELATÓRIO A&R", start: 65, end: 66, name: "Correção do relatório", responsible: "Analista" },
                { phase: "RELATÓRIO A&R", start: 65, end: 66, name: "Revisão final e recomendação", responsible: "A&R" },
                { phase: "RELATÓRIO A&R", start: 66, end: 75, name: "Validação final do relatório", responsible: "Especialista A&R/MK/FT" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 75, end: 79, name: "Envio da VAP para consultor", responsible: "A&R" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 79, end: 80, name: "Apresentação do relatório", responsible: "CONSULTOR + CLIENTE" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 80, end: 81, name: "Envio da VF para atendimento", responsible: "CONSULTOR" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 80, end: 81, name: "Upload do relatório no site", responsible: "Atendimento / Gestora Quanti" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 80, end: 81, name: "Envio da pesquisa de satisfação", responsible: "Gestora Quanti" },
            ]
        };

        document.addEventListener('DOMContentLoaded', function () {
            const boardContainer = document.getElementById('board-container');
            const filtersContainer = document.getElementById('filters-container');

            // 1. Criar as colunas das fases (sem alteração)
            projectData.phases.forEach(phase => {
                const column = document.createElement('div');
                column.id = `phase-${phase.name.replace(/\s+/g, '-')}`;
                column.className = 'flex flex-col gap-4 p-4 rounded-lg';
                column.style.backgroundColor = `${phase.color}20`;
                column.innerHTML = `<h2 class="text-xl font-bold text-center" style="color: ${phase.color}; border-bottom: 2px solid ${phase.color}; padding-bottom: 8px;">${phase.name}</h2>`;
                boardContainer.appendChild(column);
            });

            // 2. Popular as colunas com as tarefas (sem alteração)
            const sortedTasks = projectData.tasks.sort((a, b) => a.start - b.start);
            sortedTasks.forEach(task => {
                const phaseColumn = document.getElementById(`phase-${task.phase.replace(/\s+/g, '-')}`);
                if (phaseColumn) {
                    const card = document.createElement('div');
                    card.className = 'task-card bg-white p-4 rounded-lg shadow-md';
                    card.style.borderLeft = `4px solid ${projectData.phases.find(p => p.name === task.phase).color}`;
                    card.setAttribute('data-responsible', task.responsible);
                    card.innerHTML = `
                        <div class="font-semibold text-gray-800">${task.name}</div>
                        <div class="text-sm text-gray-500 mt-2"><b>Resp.:</b> ${task.responsible}</div>
                        <div class="text-xs text-gray-400 mt-2">Dia ${task.start} → Dia ${task.end}</div>
                    `;
                    phaseColumn.appendChild(card);
                }
            });

            // 3. Gerar e popular os botões de filtro (LÓGICA ALTERADA)
            const allowedFilters = [
                "Analista", "Atendimento", "Auditor", "Consultor",
                "Gestor Campo", "Gestora Quanti", "Pesquisadores"
            ]; // Lista predefinida

            const allButton = document.createElement('button');
            allButton.className = 'filter-btn active bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full text-sm';
            allButton.textContent = 'Mostrar Todos';
            allButton.setAttribute('data-responsible', 'all');
            filtersContainer.appendChild(allButton);

            // Loop sobre a lista predefinida em vez de gerar dinamicamente
            allowedFilters.forEach(responsible => {
                const button = document.createElement('button');
                button.className = 'filter-btn bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full text-sm';
                button.textContent = responsible;
                button.setAttribute('data-responsible', responsible);
                filtersContainer.appendChild(button);
            });

            // 4. Adicionar a lógica de clique aos filtros (sem alteração)
            filtersContainer.addEventListener('click', function(event) {
                if (event.target.tagName !== 'BUTTON') return;
                const selectedResponsible = event.target.getAttribute('data-responsible');
                filtersContainer.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                document.querySelectorAll('.task-card').forEach(card => {
                    const cardResponsibles = card.getAttribute('data-responsible');
                    if (selectedResponsible === 'all' || cardResponsibles.includes(selectedResponsible)) {
                        card.classList.remove('is-filtered');
                    } else {
                        card.classList.add('is-filtered');
                    }
                });
            });
        });
    </script>
</body>
</html>