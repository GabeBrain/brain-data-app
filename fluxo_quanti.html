<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linha do Tempo Interativa do Projeto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .timeline-item {
            opacity: 0;
            transform: translateX(-100px);
            transition: all 0.6s ease-out;
        }
        .timeline-item.is-visible {
            opacity: 1;
            transform: translateX(0);
        }
        .timeline-line {
            width: 4px;
            background-color: #e5e7eb;
        }
        .timeline-dot {
            transition: transform 0.3s ease-in-out;
        }
        .timeline-item.is-visible .timeline-dot {
            transform: scale(1.5);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-indigo-700">Linha do Tempo Interativa do Projeto</h1>
            <p class="text-gray-600 mt-2">Role para baixo para avançar no tempo e ver as etapas do projeto acontecerem.</p>
        </header>

        <div id="legend" class="flex flex-wrap justify-center gap-4 mb-12"></div>

        <div class="relative">
            <div class="timeline-line absolute h-full top-0 left-1/2 -translate-x-1/2"></div>
            
            <div id="timeline-container" class="space-y-4">
                </div>
        </div>
    </div>

    <script>
        const projectData = {
            phases: [
                { name: "MATERIAL DE PESQUISA", color: "sky", borderColor: "border-sky-500", bgColor: "bg-sky-500", textColor: "text-sky-600" },
                { name: "CAMPO", color: "amber", borderColor: "border-amber-500", bgColor: "bg-amber-500", textColor: "text-amber-600" },
                { name: "RELATÓRIO A&R", color: "emerald", borderColor: "border-emerald-500", bgColor: "bg-emerald-500", textColor: "text-emerald-600" },
                { name: "APRESENTAÇÃO VERSÃO FINAL", color: "indigo", borderColor: "border-indigo-500", bgColor: "bg-indigo-500", textColor: "text-indigo-600" }
            ],
            tasks: [
                { phase: "MATERIAL DE PESQUISA", start: 0, end: 1, name: "Entrada da proposta no sistema", responsible: "CONSULTOR" },
                { phase: "MATERIAL DE PESQUISA", start: 1, end: 2, name: "Envio do checklist para cliente", responsible: "gestora quanti" },
                { phase: "MATERIAL DE PESQUISA", start: 1, end: 2, name: "Agenda para reunião de briefing com cliente", responsible: "atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 7, end: 8, name: "Realização da reunião de briefing", responsible: "atendimento + CLIENTE" },
                { phase: "MATERIAL DE PESQUISA", start: 8, end: 14, name: "Elaboração da ATA da reunião", responsible: "atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 14, end: 15, name: "Recebimento do checklist preenchido", responsible: "cliente" },
                { phase: "MATERIAL DE PESQUISA", start: 15, end: 17, name: "Envio do email interno de abertura para elaboração do MP", responsible: "atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 17, end: 18, name: "Elaboração do Material de Pesquisa", responsible: "analista" },
                { phase: "MATERIAL DE PESQUISA", start: 18, end: 21, name: "Revisão do MP e envio da v1 para cliente", responsible: "atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 21, end: 24, name: "Elaboração do orçamento da coleta", responsible: "gestor campo" },
                { phase: "MATERIAL DE PESQUISA", start: 24, end: 27, name: "Aprovação do orçamento da coleta", responsible: "financeiro + CEO" },
                { phase: "MATERIAL DE PESQUISA", start: 27, end: 30, name: "Ajustes do MP e envio da v2 para cliente", responsible: "analista + atendimento" },
                { phase: "MATERIAL DE PESQUISA", start: 30, end: 31, name: "Aprovação do MP e envio do cronograma para cliente", responsible: "atendimento" },
                { phase: "CAMPO", start: 31, end: 32, name: "Envio do email interno com MP aprovado", responsible: "atendimento" },
                { phase: "CAMPO", start: 31, end: 32, name: "Contratação dos pesquisadores", responsible: "gestor campo" },
                { phase: "CAMPO", start: 32, end: 34, name: "Sistematização do MP na plataforma (GDS)", responsible: "auditor" },
                { phase: "CAMPO", start: 32, end: 34, name: "Elaboração do Plano Amostral e envio para aprovação", responsible: "analista" },
                { phase: "CAMPO", start: 34, end: 35, name: "Aprovação do Plano Amostral com consultor", responsible: "analista + CONSULTOR" },
                { phase: "CAMPO", start: 34, end: 35, name: "Teste 1 do MP - no GDS", responsible: "auditor + auditor" },
                { phase: "CAMPO", start: 34, end: 35, name: "Teste 2 do MP - simulação de execução", responsible: "auditor + analista" },
                { phase: "CAMPO", start: 37, end: 40, name: "Treinamento dos pesquisadores", responsible: "auditor" },
                { phase: "CAMPO", start: 40, end: 56, name: "Coleta de dados (acompanhamento diário)", responsible: "auditor + pesquisadores" },
                { phase: "CAMPO", start: 44, end: 48, name: "Elaboração, análise e envio da parcial 1 (25%)", responsible: "analista" },
                { phase: "CAMPO", start: 48, end: 52, name: "Elaboração, análise e envio da parcial 2 (50%)", responsible: "analista" },
                { phase: "CAMPO", start: 52, end: 56, name: "Elaboração, análise e envio da parcial 3 (75%)", responsible: "analista" },
                { phase: "CAMPO", start: 56, end: 60, name: "Término do campo", responsible: "auditor" },
                { phase: "CAMPO", start: 60, end: 61, name: "Envio da base higienizada para analista", responsible: "auditor" },
                { phase: "RELATÓRIO A&R", start: 61, end: 64, name: "Elaboração do relatório (3 dias)", responsible: "analista" },
                { phase: "RELATÓRIO A&R", start: 64, end: 65, name: "Revisão do relatório", responsible: "A&R" },
                { phase: "RELATÓRIO A&R", start: 65, end: 66, name: "Correção do relatório", responsible: "analista" },
                { phase: "RELATÓRIO A&R", start: 65, end: 75, name: "Revisão final e recomendação do relatório", responsible: "A&R" },
                { phase: "RELATÓRIO A&R", start: 65, end: 75, name: "Validação final do relatório (10 dias)", responsible: "Especialista A&R ou MK ou FT" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 75, end: 79, name: "Envio da VAP (versão apresentação) para consultor", responsible: "A&R" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 79, end: 80, name: "Apresentação do relatório", responsible: "CONSULTOR + CLIENTE" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 80, end: 81, name: "Envio da VF (versão final) para atendimento", responsible: "CONSULTOR" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 80, end: 81, name: "Upload do .pdf da VF do relatório no site", responsible: "atendimento/ gestora quanti" },
                { phase: "APRESENTAÇÃO VERSÃO FINAL", start: 80, end: 81, name: "Envio do link da pesquisa de satisfação", responsible: "gestora quanti" },
            ]
        };

        document.addEventListener('DOMContentLoaded', function () {
            const timelineContainer = document.getElementById('timeline-container');
            const legendContainer = document.getElementById('legend');
            
            // Gerar Legenda
            projectData.phases.forEach(phase => {
                const legendItem = document.createElement('div');
                legendItem.className = 'flex items-center';
                legendItem.innerHTML = `<span class="w-4 h-4 rounded-full ${phase.bgColor} mr-2"></span><span>${phase.name}</span>`;
                legendContainer.appendChild(legendItem);
            });

            // Agrupar tarefas pelo dia de início para exibir juntas
            const tasksByDay = {};
            projectData.tasks.forEach(task => {
                if (!tasksByDay[task.start]) {
                    tasksByDay[task.start] = [];
                }
                tasksByDay[task.start].push(task);
            });

            // Gerar eventos da timeline
            Object.keys(tasksByDay).sort((a, b) => a - b).forEach((day, index) => {
                const tasks = tasksByDay[day];
                const phaseInfo = projectData.phases.find(p => p.name === tasks[0].phase);

                const timelineItem = document.createElement('div');
                timelineItem.className = `timeline-item relative w-full flex ${index % 2 === 0 ? 'justify-start' : 'justify-end'}`;
                
                const contentWrapper = document.createElement('div');
                contentWrapper.className = `w-1/2 px-4 ${index % 2 === 0 ? 'text-right' : 'text-left'}`;

                const dayMarker = document.createElement('div');
                dayMarker.className = `font-bold text-lg ${phaseInfo.textColor}`;
                dayMarker.textContent = `Dia ${day}`;
                
                contentWrapper.appendChild(dayMarker);

                tasks.forEach(task => {
                    const duration = Math.max(1, task.end - task.start);
                    const card = document.createElement('div');
                    card.className = `mt-2 p-4 bg-white rounded-lg shadow-md border-l-4 ${phaseInfo.borderColor} cursor-pointer hover:shadow-xl transition-shadow`;
                    card.innerHTML = `
                        <h3 class="font-semibold text-gray-900">${task.name}</h3>
                        <div class="details hidden text-sm text-gray-600 mt-2">
                            <p><strong>Responsável:</strong> ${task.responsible}</p>
                            <p><strong>Duração:</strong> ${duration} dia(s) (termina no dia ${task.end})</p>
                        </div>
                    `;
                    card.addEventListener('click', () => {
                        card.querySelector('.details').classList.toggle('hidden');
                    });
                    contentWrapper.appendChild(card);
                });
                
                const dot = document.createElement('div');
                dot.className = `timeline-dot absolute top-1 left-1/2 -translate-x-1/2 w-4 h-4 rounded-full ${phaseInfo.bgColor} border-4 border-gray-50`;
                
                timelineItem.appendChild(contentWrapper);
                timelineItem.appendChild(dot);
                
                // Inverter a ordem visual para o lado direito
                if (index % 2 !== 0) {
                   timelineItem.insertBefore(dot, contentWrapper);
                   timelineItem.style.transform = "translateX(100px)";
                }

                timelineContainer.appendChild(timelineItem);
            });

            // Lógica para animar ao rolar
            const items = document.querySelectorAll('.timeline-item');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.5 }); // Ativa quando 50% do item está visível

            items.forEach(item => {
                observer.observe(item);
            });
        });
    </script>
</body>
</html>